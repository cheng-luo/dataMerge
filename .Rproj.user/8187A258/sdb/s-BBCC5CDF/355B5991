{
    "contents" : "# extract only mean and standard deviation of measurements\n\n# read features.txt\nfeatureFile=\"UCI HAR Dataset/features.txt\";\nfeatureDf=read.table(featureFile,header=F);\nncol(featureDf)\nnrow(featureDf)\n\nindVect=numeric()\ndesVect=character()\ncount=1;\nfor(i in 1:nrow(featureDf))\n{\n  found=grep(\"mean|std\",as.character(featureDf[i,2]),\n             ignore.case=T)\n  if(length(found)!=0)\n  {\n    indVect[count]=featureDf[i,1]\n    desVect[count]=as.character(featureDf[i,2])\n    count=count+1\n  }\n}\n\n\n# read the X_train.txt file\nxtFile=\"UCI HAR Dataset/train/X_train.txt\"\nxtDf=read.table(xtFile,header=F);\nncol(xtDf)\nnrow(xtDf)\n\n# read the X_test.txt file\nxteFile=\"UCI HAR Dataset/test/X_test.txt\"\nxteDf=read.table(xteFile,header=F);\nncol(xteDf)\nnrow(xteDf)\n\n# merge qualified varaibles in xtDf and xteDf\nx=data.frame(matrix(nrow=nrow(xtDf)+nrow(xteDf),ncol=length(indVect)))\nx[1:nrow(xtDf),]=xtDf[,indVect]\nx[(nrow(xtDf)+1):dim(x)[1],]=xteDf[,indVect]\n\n# assign column names to x\nnames(x)=desVect\n\n# create a folder to hold the final data\ndir.create(file.path(\"UCI HAR Dataset\", \"merge\"))\ndir.create(file.path(\"UCI HAR Dataset/merge\",\"dataset1\"))\n\n# write x to a text file\nxFile=\"UCI HAR Dataset/merge/dataset1/X.txt\"\nwrite.table(x,xFile,row.names=F)\n\n# read subject_train.txt file\nstFile=\"UCI HAR Dataset/train/subject_train.txt\"\nstDf=read.table(stFile,header=F);\nncol(stDf)\nnrow(stDf)\n\n# read subject_test.txt file\nsteFile=\"UCI HAR Dataset/test/subject_test.txt\"\nsteDf=read.table(steFile,header=F);\nncol(steDf)\nnrow(steDf)\n\n# merge stDf and steDf\nsubDf=data.frame(matrix(nrow=nrow(stDf)+nrow(steDf),ncol=1))\nsubDf[1:nrow(stDf),]=stDf[,]\nsubDf[(nrow(stDf)+1):dim(subDf)[1],]=steDf[,]\n\n# write subject to a text file\nnames(subDf)=\"subject\"\nsubjectFile=\"UCI HAR Dataset/merge/dataset1/subject.txt\"\nwrite.table(subDf,subjectFile,row.names=F)\n\n# read y_train.txt file\nytFile=\"UCI HAR Dataset/train/y_train.txt\"\nytDf=read.table(ytFile,header=F);\nncol(ytDf)\nnrow(ytDf)\n\n# read y_test.txt file\nyteFile=\"UCI HAR Dataset/test/y_test.txt\"\nyteDf=read.table(yteFile,header=F);\nncol(yteDf)\nnrow(yteDf)\n\n# create a character vector to label activities\nact=c(\"WALKING\",\"WALKING_UPSTAIRS\",\"WALKING_DOWNSTAIRS\",\n      \"SITTING\",\"STANDING\",\"LAYING\")\n\n# merge ytDf and yteDf\ny=data.frame(matrix(nrow=nrow(ytDf)+nrow(yteDf),ncol=1))\nfor (i in 1:nrow(ytDf))\n{\n  y[i,]=act[ytDf[i,1]];\n}\n\nfor(i in (nrow(ytDf)+1):nrow(y))\n{\n  y[i,]=act[yteDf[(i-nrow(ytDf)),1]];\n}\n\n# write y to y.txt\nnames(y)=\"activity\"\nyFile=\"UCI HAR Dataset/merge/dataset1/y.txt\"\nwrite.table(y,yFile,row.names=F)\n\n# create a data frame to hold all the data\nallDf=data.frame(matrix(nrow=(nrow(xtDf)+nrow(xteDf)),\n                        ncol=(ncol(xtDf)+2)))\n# fill X data into allDf\nallDf[1:nrow(xtDf),1:ncol(xtDf)]=xtDf[,]\nallDf[(nrow(xtDf)+1):(nrow(xtDf)+nrow(xteDf)),1:ncol(xtDf)]=xteDf[,]\n\n# fill subject data into allDf\nallDf[,(ncol(xtDf)+1)]=subDf\n\n# fill y(activity) data into allDf\nallDf[1:nrow(ytDf),ncol(allDf)]=ytDf[,]\nallDf[(nrow(ytDf)+1):(nrow(ytDf)+nrow(yteDf)),ncol(allDf)]=yteDf[,]\n\n# sort allDf by subject and then by activity\nsAllDf=allDf[order(allDf[,(ncol(allDf)-1)],allDf[,(ncol(allDf))]),]\n\ntmpAllDf=data.frame(matrix(nrow=nrow(allDf),ncol=ncol(allDf)))\ntmpAllDf[,ncol(allDf)-1]=sAllDf[,ncol(allDf)-1]\ntmpAllDf[,ncol(allDf)]=sAllDf[,ncol(allDf)]\n\n# calculate averages\nfor(i in 1:(ncol(allDf)-2))\n{\n  tmpAllDf[,i]=ave(sAllDf[,i],sAllDf[,ncol(allDf)-1],sAllDf[,ncol(allDf)])\n}\n\n# retrieve distince rows\nfinalAllDf=unique(tmpAllDf)\n\n# write finalAllDf into X, subject, and y files\n# add column names\ncolnames=c(as.character(featureDf[,2]),\"subject\",\"activity\")\nnames(finalAllDf)=colnames\n\n# create a folder to hold the data\ndir.create(file.path(\"UCI HAR Dataset/merge\",\"dataset2\"))\nx2File=\"UCI HAR Dataset/merge/dataset2/X.txt\"\nwrite.table(finalAllDf[,1:(ncol(allDf)-2)],x2File,row.names=F)\n\nsubject2File=\"UCI HAR Dataset/merge/dataset2/subject.txt\"\nwrite.table(finalAllDf[,ncol(allDf)-1],subject2File,row.names=F,col.names=\"subject\")\n\ny2File=\"UCI HAR Dataset/merge/dataset2/y.txt\"\nact2=data.frame(matrix(nrow=nrow(finalAllDf),ncol=1))\nfor(i in 1:nrow(finalAllDf))\n{\n  act2[i,1]=act[finalAllDf[i,ncol(allDf)]]\n}\nnames(act2)=\"activity\"\nwrite.table(act2,y2File,row.names=F)\n\n",
    "created" : 1397935155391.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1293711500",
    "id" : "355B5991",
    "lastKnownWriteTime" : 1398178493,
    "path" : "C:/Mis/Misc/Learning/assignments/Getting and Cleaning Data/project/project/run_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}